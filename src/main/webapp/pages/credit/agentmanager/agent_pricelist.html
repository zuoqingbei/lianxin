

﻿<% 
	var headContent = {
	include("/pages/template/head.html"){}
%>

<script type="text/javascript">
var oper;
jQuery(function($) {
	// 页面方法
	oper = {
		width :800,
		height : 450,
		form : document.form1,
		list : function() {
			let id = location.href.split("/")[location.href.split("/").length-1]
			var url = '/credit/agentmanager/agentPriceList/'+id;
			this.form.action = url;
			this.form.submit();
		},
		add : function() {
			console.log(location.href)
			let id = location.href.split("/")[location.href.split("/").length-1]
			var url = '/credit/agentmanager/addPrice/'+id;
			var title = '添加代理价格';
			Iframe(url, this.width, this.height, title);
		},
		edit : function(id) {
			var url = '/credit/agentmanager/editPrice/'+id 
			var title = '修改代理价格';
			Iframe(url, this.width, this.height, title); 
		},
		del : function(id) {
			let agent_id = location.href.split("/")[location.href.split("/").length-1]
			var url = '/credit/agentmanager/deletePrice?id='+id+'&agent_id='+agent_id;
			var title = '确认要删除该代理价格？';
			Confirm(title, function() {
				form1.action = url;
				form1.submit();
			});
		}
	};
});

//分页
var paginator = function(page) {
	oper.list();
};

</script>

<% }; var bodyContent = { %>
<form name="form1" action="" method="post" class="form-inline" role="form">
	
	<div class="form-group">
		<button type="button" class="btn btn-default" onclick="oper.add();" >
		 		<span class="glyphicon glyphicon-plus"></span> 新 增
		</button>	
	</div>
<!-- 数据列表 -->
	<table class="table table-striped table-bordered table-hover">
		<thead>
			<tr>
				<th>序号</th>
				<th name="a.agent_id" class="sorting">代理编码</th>
				<th name="a.agent_type" class="sorting">代理类型</th>
				<th name="a.proxy_time" class="sorting">代理用时</th>
				<th name="a.price" class="sorting">价格·</th>
				<th name="a.currency" class="sorting">币种</th>
				<th name="a.speed" class="sorting">速度</th>
				<th name="a.country" class="sorting">国家</th>
				<th name="a.province" class="sorting">省份</th>
				<th name="a.city" class="sorting">城市</th>
				<th name="a.agent_category" class="sorting">代理类别</th>
				<th>操作</th>
			</tr>
		</thead>
		<tbody>
		<% for(item in page.list) { %>
			<tr>
				<td>${itemLP.index }</td>
				<td>${item.agent_id}</td>
				<td>${item.agentType}</td>	
				<td>${item.proxy_time}</td>
				<td>${item.price}</td>
				<td>${item.Currency}</td>
				<td>${item.Speed}</td>
				<td>
					<% if (strutil.length(item.country) >
					12) { %> ${strutil.subStringTo(item.country, 0, 12)}... <% } else { %>
					${item.country} <% } %>
				</td>
				<td>${item.provinceName}</td>
				<td>${item.cityName}</td>
				<td>
				<% if (strutil.length(item.agent_categoryName) >
					12) { %> ${strutil.subStringTo(item.agent_categoryName, 0, 12)}... <% } else { %>
					${item.agent_categoryName} <% } %>
				</td>
				<td>
					<a href="javascript:void(0);" class="btn btn-sm btn-primary"  onclick="oper.edit(${item.id});">修改</a> 
					<a href="javascript:void(0);" class="btn btn-sm btn-danger"  onclick="oper.del(${item.id});">删除</a>
				</td>
			</tr>
		<% } %>
		</tbody>
	</table>
	<%include("/pages/includes/paginator.html"){} %>
</form>
<%}; %>
<% layout("/pages/template/_layout.html",{head:headContent,body:bodyContent}){ %>
<%} %>

