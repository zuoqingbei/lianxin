<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>联信</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
    <meta name="renderer" content="webkit">
    <link rel="stylesheet" type="text/css" media="screen" href="${BASE_PATH }static/credit/assets/bootstrap-4.1.1-dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="${BASE_PATH }static/credit/assets/bootstrap-table/css/bootstrap-table.min.css">
    <link rel="stylesheet" href="${BASE_PATH }static/credit/assets/bootstrap-table/css/bootstrap-table-fixed-columns.css">
    <link rel="stylesheet" href="${BASE_PATH }static/credit/assets/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="${BASE_PATH }static/credit/css/reset.css">
    <link rel="stylesheet" href="${BASE_PATH }static/credit/css/common.css">
    <link rel="stylesheet" href="${BASE_PATH }static/credit/css/menu.css">
   <link rel="stylesheet" href="${BASE_PATH }static/credit/css/index.css">

</head>
<body>
	
    <div class="container-fluid">
        <!-- 头部 -->
        <header> </header>
        <!-- 中间部分 -->
         <div id="container" class="row">
            <!-- 左侧菜单 -->
            <div class="nav-row col-md-2"></div>
            <!-- 内容 -->
            <div class="main col-md-10">
                <!-- 个人信息 -->
                <div class="user-order d-flex justify-content-between align-items-center">
                    <div class="user-info d-flex flex-column justify-content-center">
                        <p class="regards mb-1">早安，<span id="name"></span>，祝你开心每一天！</p>
                        <p class="job-title mt-2">
                            <span id="role"></span>
                            <span id="dept"></span>
                        </p>
                    </div>
                    <div class="order-info d-flex justify-content-center align-items-center ">
                        <div class="order-item pl-5 pr-5 d-flex flex-column justify-content-center align-items-center">
                            <span>核实中订单</span>
                            <span>24</span>
                        </div>
                        <div class="order-item pl-5 pr-5 d-flex flex-column justify-content-center align-items-center">
                            <span>查档中订单</span>
                            <span>89</span>
                        </div>
                        <div class="order-item pl-5 pr-5 d-flex flex-column justify-content-center align-items-center">
                            <span>质检中订单</span>
                            <span>12</span>
                        </div>
                    </div>
                </div>
                <!-- 表格 -->
                <div class="table-content p-3">
                    <div class="bg-f">
                        <div class="form-box">
                            <form id="formSearch" class="form-inline" role="form">
                                <div class="form-group row d-flex justify-content-around mb-4">
                                    <div class="input-group mt-2 col-md-4">
                                        <label class="control-label col-md-4" for="txt_search_departmentname">公司名称：</label>
                                        <input id="company_by_report" name="attr.company_by_report" type="text" class="form-control search-input col-md-8" id="txt_search_departmentname" placeholder="请输入公司名称">
                                    </div>
                                    <div class="input-group mt-2 col-md-4">
                                        <label class="control-label col-md-4" for="txt_search_companyEngName">订单公司名称：</label>
                                        <input id="right_company_name_en" name="attr.right_company_name_en" type="text" class="form-control search-input col-md-8" id="txt_search_companyEngName" placeholder="请输入订单公司名称">
                            		</div>
                                    <div class="input-group mt-2 col-md-4">
                                        <label class="control-label col-md-4" for="txt_search_statu">到期日期：</label>
                                        <input name="end_date" type="text" class="form-control search-input col-md-8" id="dead_date"   placeholder="请选择到期日期"">
                                    </div>
                                </div>
                                <div id="btnCollapse" class="show row justify-content-around">
                                    <div class="input-group mt-2 col-md-4" id="client">
                                        <label class="control-label col-md-4" for="txt_search_statu">客户：</label>
                                        <select id="custom_id" name="attr.custom_id" class="form-control search-input col-md-8">
                                            <option value="" disabled selected>请选择客户</option>
                                        </select>
                                    </div>
                                    <div class="input-group mt-2 col-md-4" id="proxy">
                                        <label class="control-label col-md-4" for="txt_search_statu">代理：</label>
                                        <select class="form-control search-input col-md-8" >
                                                <option value="" disabled selected>请选择代理</option>
                                        </select>
                                    </div>
                                    <div class="input-group mt-2 col-md-4">
                                        <label class="control-label col-md-4" for="txt_search_statu">地区：</label>
                                        <select id="continent" name="attr.continent" class="form-control search-input col-md-8" onchange="getCountry2()">
                                            <option value="" disabled selected>请选择地区</option>
                                        </select>
                                    </div>
                                    <div class="input-group mt-2 col-md-4">
                                        <label class="control-label col-md-4" for="txt_search_statu">国家：</label>
                                        <select id="country" name="attr.country" class="form-control search-input col-md-8" >
                                            <option value="" disabled selected>请选择国家</option>
                                        </select>
                                    </div>
                                </div>
                            </form>
                            <div class="btn-row d-flex justify-content-between mt-4 mb-4">
                                <a role="button" class="btn btn-primary ml-5 d-flex align-items-center" href="createOrder.html"><i class="fa fa-plus pr-2"></i>新增订单</a>
                                <div class="right-btn btn-group d-flex align-items-center justify-content-around mr-4">
                                    <button type="button" id="btn_query" class="btn btn-primary">查询</button>
                                    <button type="button" id="btn_reset" class="btn btn-light">重置</button>
                                    <a  role="button" data-toggle="collapse" href="#btnCollapse" aria-expanded="false"  aria-controls="btnCollapse">收起 <i class="fa fa-angle-up"></i></a>
                                </div>
                            </div>
                            
                        </div>
                        <table id="table"
                            data-toggle="table"
                            data-url="./data.json"
                            style="position: relative"
                        >
                        <div class="deal-state"> 
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="4" class="form-check-input" id="defaultCheck1"> 
                                     <label class="form-check-label" for="defaultCheck1">客户撤销</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="3" class="form-check-input" id="defaultCheck2"> 
                                     <label class="form-check-label" for="defaultCheck2">确认完成</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="0" class="form-check-input" id="defaultCheck3"> 
                                     <label class="form-check-label" for="defaultCheck3">新建订单</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="" class="form-check-input" id="defaultCheck4"> 
                                     <label class="form-check-label" for="defaultCheck4">代理完成</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="" class="form-check-input" id="defaultCheck5"> 
                                     <label class="form-check-label" for="defaultCheck5">代理补充</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="1" class="form-check-input" id="defaultCheck6"> 
                                     <label class="form-check-label" for="defaultCheck6">订单分配</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="" class="form-check-input" id="defaultCheck7"> 
                                     <label class="form-check-label" for="defaultCheck7">订单分配（重复可用）</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="" class="form-check-input" id="defaultCheck8"> 
                                     <label class="form-check-label" for="defaultCheck8">订单分配（重复更新）</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="" class="form-check-input" id="defaultCheck9"> 
                                     <label class="form-check-label" for="defaultCheck9">检查合格</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="" class="form-check-input" id="defaultCheck10"> 
                                     <label class="form-check-label" for="defaultCheck10">客户确认</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="" class="form-check-input" id="defaultCheck11"> 
                                     <label class="form-check-label" for="defaultCheck11">组确认</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="" class="form-check-input" id="defaultCheck12"> 
                                     <label class="form-check-label" for="defaultCheck12">客户内容已更新</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="" class="form-check-input" id="defaultCheck13"> 
                                     <label class="form-check-label" for="defaultCheck13">调档</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="" class="form-check-input" id="defaultCheck14"> 
                                     <label class="form-check-label" for="defaultCheck14">报告完成</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="" class="form-check-input" id="defaultCheck15"> 
                                     <label class="form-check-label" for="defaultCheck15">报告制作</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="" class="form-check-input" id="defaultCheck16"> 
                                     <label class="form-check-label" for="defaultCheck16">确认收到</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="" class="form-check-input" id="defaultCheck17"> 
                                     <label class="form-check-label" for="defaultCheck17">查注册</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="" class="form-check-input" id="defaultCheck18"> 
                                     <label class="form-check-label" for="defaultCheck18">整理完成</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="" class="form-check-input" id="defaultCheck19"> 
                                     <label class="form-check-label" for="defaultCheck19">整理报告</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" name="status" value="" class="form-check-input" id="defaultCheck20"> 
                                     <label class="form-check-label" for="defaultCheck20">整理退回补充</label>
                                </div>
                             <a href="javascript:;" role="button"  onclick="check()">确定</a></div>
                        </table>
                    </div>
                </div>
            </div>

                    
            <!-- 底部 -->
            <footer></footer>
        </div>
    </div>
    </div>
   <script src="${BASE_PATH }static/credit/assets/jquery/jquery-2.1.0.js"></script>
    <script src="${BASE_PATH }static/credit/assets/laydate/laydate.js"></script>
    <script src="${BASE_PATH }static/credit/assets/popper/popper.min.js"></script>
    <script src="${BASE_PATH }static/credit/assets/bootstrap-4.1.1-dist/js/bootstrap.min.js"></script>
    <script src="${BASE_PATH }static/credit/assets/bootstrap-table/js/bootstrap-table.js"></script>
    <script src="${BASE_PATH }static/credit/assets/bootstrap-table/js/bootstrap-table-fixed-columns.js"></script>
    <script src="${BASE_PATH }static/credit/assets/bootstrap-table/js/bootstrap-table-zh-CN.min.js"></script> 
    <script src="${BASE_PATH }static/credit/js/common.js"></script>
   <script src="${BASE_PATH }static/credit/js/index.js"></script>
	<script type="text/javascript">
		$(function(){
			$.get('/credit/front/home/getMessage',function(data){
				$("#name").html(data.user.realname);
				$("#role").html(data.user.roleName);
				$("#dept").text(data.user.departName);
				getCustoms(data.customs);
				getContient(data.continent);
				getCountry(data.country);
			})	
		});
		function getCustoms(data){
			var html=""
			for(item in data){
				html+="<option  value='"+data[item].id+"'>"+data[item].name+"</option>";
			}
			$("select[name='attr.custom_id']").append(html);
		};
		function getContient(data){
			var html=""
			for(item in data){
				html+="<option  value='"+data[item].detail_id+"'>"+data[item].detail_name+"</option>";
			}
			$("select[name='attr.continent']").append(html);
			
		};
		function getCountry(data){
			var html=""
			html+=html+="<option  value=''>请选择</option>";
				for(item in data){
					html+="<option  value='"+data[item].id+"'>"+data[item].name+"</option>";
				}
				$("select[name='attr.country']").html(html);
		}
		function getCountry2(){
			var contient =$("select[name='attr.continent']").val();
			$.get('/credit/front/home/getCountry?contient='+contient,function(data){
				console.log(data)
				getCountry(data);
			})	
		}
		function check(){
		    /*   $(".enterFilter").click(function(){ */
		       	 var checked=[];
		    	 var checkchar=""
		                 $("input[name='status']:checked").each(function(i){
		                       checked[i] = $(this).val();
		                       checkchar+=checked[i]+","
		                 });
		                 console.log(checkchar);
		                 console.log($("#attr.custom_id").val+$("#attr.continent").val);
		        		$.ajax({
		        			type:"post",
		        			url:"home/list",
		        			data:{"attr.custom_id":$("#custom_id").find("option:selected").val(),
		        				"attr.continent":$("#continent").find("option:selected").val(),
		        				"attr.country":$("#country").find("option:selected").val(),
		        				"attr.end_date":$("#dead_date").val(),
		        				"attr.company_by_report":$("#company_by_report").val(),
		        				"attr.right_company_name_en":$("#right_company_name_en").val(),
		        				"status":checkchar},
		        			 dataType:"json",
		        			 success:function(data){
		        			 	 $("#table").bootstrapTable("load",data)
		        			 }
		        		})

		         /**发起ajax请求  获取表格数据*/
		/*        }) */
		}
	</script>
	
</body>
</html>
    