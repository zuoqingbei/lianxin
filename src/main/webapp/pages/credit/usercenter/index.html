<!DOCTYPE html>
<% var orderstatus = tempDict.getListSysDictDetail('orderstate'); %>
<% var agent = agent.getAgentIdString(); %>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>联信</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
    <meta name="renderer" content="webkit">
     <link rel="stylesheet" href="${BASE_PATH }static/credit/assets/layui/css/layui.css">
      <link rel="stylesheet" href="${BASE_PATH }static/credit/css/reset.css">
    <link rel="stylesheet" href="${BASE_PATH }static/credit/css/common.css">
   <link rel="stylesheet" href="${BASE_PATH }static/credit/css/index.css">

	<script type="text/javascript">
	    var BASE_PATH = "${BASE_PATH }";
    </script>
</head>

        <div id="container" class="row  animated fadeIn">
           
            <!-- 内容 -->
            <div class="main">
                <!-- 个人信息 -->
                <div class="user-order d-flex justify-content-between align-items-center">
                    <div class="user-info d-flex flex-column justify-content-center">
                        <p class="regards mb-1">您好，<span id="name"></span>，祝你开心每一天！</p>
                        <p class="job-title mt-2">                            
                            <span id="role"></span>
                             <span id="company"></span>
                             <span id="fengefu">-</span>
                             <span id="dept"></span>
                            
                        </p>
                    </div>
                    <div class="order-info d-flex justify-content-center align-items-center ">
                        <div class="order-item pl-5 pr-5 d-flex flex-column justify-content-center align-items-center">
                            <span>核实中订单</span>
                            <span id="orderhs">24</span>
                        </div>
                        <div class="order-item pl-5 pr-5 d-flex flex-column justify-content-center align-items-center">
                            <span>查档中订单</span>
                            <span id="ordercd">89</span>
                        </div>
                        <div class="order-item pl-5 pr-5 d-flex flex-column justify-content-center align-items-center">
                            <span >质检中订单</span>
                            <span id="orderzj">12</span>
                        </div>
                    </div>
                </div>
                <!-- 表格 -->
                <div class="table-content">
                    <div class="bg-f">
                        <div class="form-box">
                            <form id="formSearch" class="form-inline layui-form" role="form">
                                <div class="form-group row d-flex justify-content-around ">
                                    <div class="input-group mt-2 col-md-4">
                                        <label class="control-label col-md-4" for="txt_search_departmentname">公司中文名称：</label>
                                        <input  type="text" class="form-control search-input col-md-8" id="txt_search_departmentname" placeholder="请输入公司名称">
                                    </div>
                                    <div class="input-group mt-2 col-md-4">
                                        <label class="control-label col-md-4" for="txt_search_companyEngName">订单公司名称：</label>
                                        <input type="text" class="form-control search-input col-md-8" id="txt_search_companyEngName" placeholder="请输入订单公司名称">
                                    </div>
                                    <div class="input-group mt-2 col-md-4">
                                        <label class="control-label col-md-4" for="txt_search_statu">到期日期：</label>
                                        <input id="dead_date" type="text" class="form-control search-input col-md-8"  placeholder="请选择到期日期"">
                                    </div>
                                </div>
                                <div id="btnCollapse" style="width:100%">
                                <div id="" class="show row justify-content-around">
                                    <div class="input-group mt-2 col-md-4 " id="client">
                                        <label class="control-label col-md-4" for="txt_search_statu">客户ID：</label>
                                        <select id="custom_id" name='attr.custom_id' class="search-input col-md-8 layui-input">
                                            <option value="" disabled selected>请选择客户</option>
                                          
                                        </select>
                                    </div>
                                    <div class="input-group mt-2 col-md-4" id="proxy">
                                        <label class="control-label col-md-4" for="txt_search_statu">代理：</label>
                                        <select class=" search-input col-md-8 layui-input"  id="agentId">
                                            ${agent!}
                                              
                                        </select>
                                    </div>
                                    <div class="input-group mt-2 col-md-4" id="country">
                                        <label class="control-label col-md-4" for="txt_search_statu">国家：</label>
                                        <select id="country" name='attr.country' class="search-input col-md-8 layui-input" lay-search="" ay-verify="">
                                            <option value="" disabled selected>请选择国家</option>
                                        </select>
                                    </div>
                                    </div>
                                    <div id="btnCollap" class="show row ">
	                                    <div class="input-group mt-2 col-md-4" >
	                                        <label class="control-label col-md-4" for="txt_search_departmentname">订单编号：</label>
	                                        <input id="num" type="text" class="form-control search-input col-md-8"  placeholder="请输入订单编号">
	                                    </div>
	                                    <div class="input-group mt-2 col-md-4" >
	                                        <label class="control-label col-md-4" for="txt_search_departmentname">客户参考号：</label>
	                                        <input id="reference_num" type="text" class="form-control search-input col-md-8"  placeholder="请输入客户参考号">
	                                    </div>
                               		 </div>
                               	</div>
                            </form>
                            <div class="btn-row d-flex justify-content-between mt-3 mb-3">
                                <a role="button" class="btn btn-primary ml-5 d-flex align-items-center" href="javascript:;" onclick="Public.createOrder()"><i class="fa fa-plus pr-2"></i>新增订单</a>
                                <div class="right-btn btn-group d-flex align-items-center justify-content-around mr-4">
                                    <button type="button" id="btn_query" class="btn btn-primary enterFilter">查询</button>
                                    <button type="button" id="btn_reset" class="btn btn-light">重置</button>
                                    <a  id="hideBtn" href="javascript:;">收起 <i class="fa fa-angle-up"></i></a>
                                </div>
                            </div>
                            
                        </div>
                        <table id="table"
                            data-toggle="table"
                            data-url=""
                            style="position: relative"
                        >
                            <div class="deal-state"> 
                            	<%for(item in orderstatus){%>
                            		 <div class="form-check">
	                                    <input name="status" type="checkbox" class="form-check-input"  value="${item.detail_id}"> 
	                                    <label class="form-check-label" for="defaultCheck1">${item.detail_name}</label>
                                	</div>
                                <%}%>
                               <!--  <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck1" value="1"> 
                                    <label class="form-check-label" for="defaultCheck1">订单分配</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck2" value=""> 
                                    <label class="form-check-label" for="defaultCheck2">客户确认</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck3" value=""> 
                                    <label class="form-check-label" for="defaultCheck3">报告制作</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck4" value=""> 
                                    <label class="form-check-label" for="defaultCheck4">报告完成</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck5" value=""> 
                                    <label class="form-check-label" for="defaultCheck5">代理中</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck6" value=""> 
                                    <label class="form-check-label" for="defaultCheck6">代理完成</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck7" value=""> 
                                    <label class="form-check-label" for="defaultCheck7">代理补充</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck8" value=""> 
                                    <label class="form-check-label" for="defaultCheck8">报告质检中</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck9" value=""> 
                                    <label class="form-check-label" for="defaultCheck9">报告质检不通过</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck10" value=""> 
                                    <label class="form-check-label" for="defaultCheck10">报告质检合格</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck11" value=""> 
                                    <label class="form-check-label" for="defaultCheck11">分析制作</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck12" value=""> 
                                    <label class="form-check-label" for="defaultCheck12">分析完成</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck13" value=""> 
                                    <label class="form-check-label" for="defaultCheck13">分析质检中</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck14" value=""> 
                                    <label class="form-check-label" for="defaultCheck14">分析质检不通过</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck15" value=""> 
                                    <label class="form-check-label" for="defaultCheck15">分析质检合格</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck16" value=""> 
                                    <label class="form-check-label" for="defaultCheck16">翻译制作</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck17" value=""> 
                                    <label class="form-check-label" for="defaultCheck17">翻译完成</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck18" value=""> 
                                    <label class="form-check-label" for="defaultCheck18">翻译质检中</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck19" value=""> 
                                    <label class="form-check-label" for="defaultCheck19">翻译质检不通过</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck20" value=""> 
                                    <label class="form-check-label" for="defaultCheck20">翻译质检合格</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck21" value=""> 
                                    <label class="form-check-label" for="defaultCheck21">报告完成</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck22" value=""> 
                                    <label class="form-check-label" for="defaultCheck22">客户内容已更新</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck23" value=""> 
                                    <label class="form-check-label" for="defaultCheck23">客户撤销</label>
                                </div>
                                <div class="form-check">
                                    <input name="status" type="checkbox" class="form-check-input" id="defaultCheck24" value=""> 
                                    <label class="form-check-label" for="defaultCheck24">订单完成</label>
                                </div> -->
                                <div class="btn-group btn-filter d-flex justify-content-center mt-4">
                                    <a href="javascript:;" role="button" class="enterFilter mr-4">确定</a>
                                    <a href="javascript:;" role="button" class="resetrFilter">重置</a>
                                </div>
                            </div>
                        </table>
                    </div>
                </div>
            </div>

        </div>
   <script src="${BASE_PATH }static/credit/assets/layui/layui.all.js"></script>
   <script src="${BASE_PATH }static/credit/js/index.js"></script>
   <script type="text/javascript">
   console.log(Public)
		$(function(){
			$.get('/credit/front/home/getMessage',function(data){
				$("#name").html(data.user.realname);
				$("#role").html(data.user.roleName);
				$("#dept").text(data.user.departName);
				$("#company").text(data.user.companyName);
				$("#orderhs").text(data.orderhs);
				$("#ordercd").text(data.ordercd);
				$("#orderzj").text(data.orderzj);
				getCustoms(data.customs);
				getCountry(data.country);
			})	
		});
		function getCustoms(data){
			console.log(data);
			var html=""
			for(item in data){
				html+="<option  value='"+data[item].id+"'>"+data[item].id+"</option>";
			}
			$("select[name='attr.custom_id']").append(html);
		};
		function getCountry(data){
			var html=""
			html+=html+="<option  value=''>请选择</option>";
			
				for(item in data){
					html+="<option  value='"+data[item].id+"'>"+data[item].name+"</option>";
				}
				$("select[name='attr.country']").html(html);
				//重新渲染 否则option不能显示
				layui.use('form', function(){
					var form = layui.form;  
					form.render(); //更新全部
				});
		
		}
		function orderinfo(id){
			Public.goToOrderDetail(id)
		}
		function getMessage(){
			$.ajax({
				type:"post",
				url:"/credit/front/home/getMessage",
				data:{"attr.custom_id":$("#custom_id").find("option:selected").val(),
					"attr.continent":$("#continent").find("option:selected").val(),
					"attr.country":$("#country").find("option:selected").val(),
					"attr.end_date":$("#dead_date").val(),
					"attr.company_by_report":$("#txt_search_departmentname").val(),
					"attr.right_company_name_en":$("#txt_search_companyEngName").val()
					},
				 dataType:"json",
				 success:function(data){
				 	$("#orderhs").text(data.orderhs);
					$("#ordercd").text(data.ordercd);
					$("#orderzj").text(data.orderzj);
				 }
			});
		}
		
		
	
	</script>
</html>
    
